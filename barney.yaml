images:
  build-floor:
    units:
      - image: code.arista.io/infra/barney/barnzilla%rpms/protobuf
      - image: code.arista.io/infra/barney/barnzilla%rpms/protobuf-compiler

  efw-protobufs:
    description: |
      All protobufs used to file reports with Reportd compiled and 
      ready to be used in the EfwProtobuf BIP
    units:
      - floor: .%build-floor
        sources:
          - github.com/untangle/golang-shared
        build: |
          echo "name is: "
          find / -name struct.proto
          exit 1
          protoc --proto_path=/src/github.com/untangle/golang-shared/protobuffersrc --cpp_out=/dest /src/github.com/untangle/golang-shared/protobuffersrc/*

images:
  build-floor:
    units:
      - image: code.arista.io/infra/barney/barnzilla%rpms/protobuf
      - image: code.arista.io/infra/barney/barnzilla%rpms/protobuf-compiler

  efw-protobufs:
    description: |
      All protobufs used to file reports with Reportd compiled and 
      ready to be used in the EfwProtobuf BIP
    units:
      - floor: .%build-floor
        sources:
          - github.com/untangle/golang-shared
          - github.com/protocolbuffers/protobuf
        build: |
          
          protoc --proto_path=/src/github.com/untangle/golang-shared/protobuffersrc --proto_path=/src/github.com/protocolbuffers/protobuf/src --cpp_out=/dest /src/github.com/untangle/golang-shared/protobuffersrc/*

FROM golang:1.17.8-alpine3.15
LABEL maintainer="Sebastien Delafond <sdelafond@gmail.com>"

RUN apk update
RUN apk add --update gcc musl-dev

RUN apk add linux-headers
RUN apk add make
RUN apk add autoconf
RUN apk add automake
RUN apk add libtool
RUN apk add git
RUN apk add zeromq-dev
RUN apk add curl

# build discoverd
RUN mkdir -p /go/discoverd
VOLUME /go/discoverd
WORKDIR /go/discoverd
CMD make all
